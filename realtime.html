<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="aparcaslogo.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Aparcas Project</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/jquery-ui/jquery-ui.js"></script>








    <script type="text/javascript" src="js/amq_jquery_adapter.js"></script>
    <script type="text/javascript" src="js/amq.js"></script>



    <script type="text/javascript" src="bower_components/moment/min/moment.min.js"></script>

    <!-- Bootstrap core CSS     -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
    <!-- Animation library for notifications   -->
    <link href="bower_components/bootstrap/dist/css/animate.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="bower_components/jquery/src/css/jquery-ui.css">

    <link rel="stylesheet" href="bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />

    <link href="https://fonts.googleapis.com/css?family=Mitr" rel="stylesheet">

    <link href="assets/css/style.css" rel="stylesheet" />






    <style type="text/css">
        html,
        body {
            margin-left: auto;
            margin-right: auto;
            font-family: 'Mitr', sans-serif;
            margin: auto;
            position: relative;
            padding: 0 0 0 0;
            height: 100%;
            width: 100%;
        }

        table {
            border: 1px solid black;
        }

        th {
            padding: 0px 0px 0px 50px;
        }

        .modal-body {
            position: relative;
            overflow-y: auto;
            max-height: 400px;
            padding: 15px;
        }

        #legend {
            background: #FFF;
            padding: 10px;
            margin: 5px;
            font-size: 12px;
            font-family: Arial, sans-serif;
        }

        .color {
            border: 1px solid;
            height: 12px;
            width: 12px;
            margin-right: 3px;
            float: left;
        }

        .blue {
            background: #4d4dff;
        }

        .green {
            background: #4dff88;
        }

        .yellow {
            background: #ffff4d;
        }

        .orange {
            background: #ff944d;
        }

        .red {
            background: #ff4d4d;
        }

        #full-width {
            padding: 0 0 0 0;
        }
    </style>



</head>

<body>


    <header>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-12">
                    <h4><strong>Air Pollution and Radioactive Contamination Analyzing System (APARCAS)</strong> &nbsp;&nbsp;</h4>

                </div>

            </div>
        </div>
    </header>


    <section class="menu-section">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <ul id="menu-top" class="nav navbar-nav navbar-right">
                        <li><a class="menu-top-active" href="realtime.html">คุณภาพอากาศแบบเรียลไทม์</a></li>
                        <li><a href="radioactive.html">ประวัติปริมาณกัมมันตรังสี</a></li>
                        <li><a href="airquality.html">ประวัติคุณภาพอากาศ</a></li>
                        <li><a href="directions.html">ค้นหาเส้นทางหลีกเลี่ยงมลพิษ</a></li>
                        <!-- <li><a href="predict.html">พยากรณ์คุณภาพอากาศ</a></li> -->
                        <li><a href="aqi.html">ดัชนีคุณภาพอากาศ</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>






    <div id="full-width" class="container-fluid">
        <div class="row">
            <div class="col-sm-12 ">
                <div id="map" style="width:100%; height:1000px;"></div>
            </div>
        </div>
    </div>
</body>




<script>
    var markers = [];
    var FusionTable = [];
    var markercheck = false;

    function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 11,
            center: new google.maps.LatLng(13.756331, 100.501765),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }); //end of map

        /*  var marker = new google.maps.Marker({
              position: new google.maps.LatLng(15.9443970094, 100.1210692095),
              icon: new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/icons/blue-dot.png', undefined, undefined, undefined, new google.maps.Size(50, 50)),
              map: map,
              title: "Hello World!"
          });*/

        //
        var amq = org.activemq.Amq;
        amq.init({
            uri: 'amq',
            logging: true
            //timeout: 20
        });

        var myHandler = {
            rcvMessage: function(message) {
                jsonObj = JSON.parse(message.textContent);
                console.log("message2: " + JSON.stringify(jsonObj));
                var mID;
                var mLat;
                var mLng;
                var mRadio;
                var mTime;
                mID = jsonObj.uid;
                mLat = jsonObj.lat;
                mLng = jsonObj.lon;
                mRadio = eval(jsonObj.rad);
                mTime = jsonObj.ts;
                UpdateMap(mID, mLat, mLng, mRadio, mTime);


            },
            myId: 'test0',
            myDestination: 'topic://aparcas_conv'
        };

        amq.addListener(myHandler.myId, myHandler.myDestination, myHandler.rcvMessage);

        function UpdateMap(id, Lat, Lng, Radio, Time) {
            var time = moment.unix(Time).format("YYYY-MM-DD HH:mm:ss"); // 1481662579 to 2016-12-14 03:56:19
            console.log("UpdateMap()");
            console.log("showData: id: " + id + "Lat: " + Lat + " Lng: " + Lng + " Radio: " + Radio + " Time: " + time);



            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(Lat, Lng),
                map: map,
                icon: new google.maps.MarkerImage(getColorMarker(Radio), undefined, undefined, undefined, new google.maps.Size(40, 40)),
                title: "Hello World!"
            });

            markers.push(marker);

            var infoWindow = new google.maps.InfoWindow({
                content: "<div class = 'text-primary'><b>การแจ้งเตือนปริมาณกัมมันตรังสี</b></div>" +
                    "<div class = 'text-muted'>เวลาอัพเดทล่าสุด " + time + "</div>" +
                    "<div class = 'text-info'>ไอดีผู้ใช้: " + id + "</div>" +
                    "<div class = 'text-info'>ค่ากัมมันตรังสี: " + Radio + "</div>",

                maxWidth: 500
            });
            marker.addListener('click', function() {
                infoWindow.open(map, marker);
            });

        }

        setMarkerOnMap();
        setDataOnMap();
        setLegendOnMap();


        function setLegendOnMap() {
            // Create the legend and display on the map
            var legend = document.createElement('div');
            legend.id = 'legend';
            var content = [];


            content.push("<div class='panel-group' id='accordion'>");
            content.push("<div class='panel panel-default'>");
            content.push("<div class='panel-heading'>");
            content.push("<h4 class='panel-title'>");
            content.push("<a data-toggle='collapse' data-parent='#accordion' href='#collapse1'>");
            content.push("ดัชนีคุณภาพอากาศ</a>");
            content.push("</h4>");
            content.push("</div>");
            content.push("<div id='collapse1' class='panel-collapse collapse'>");
            content.push("<div class='panel-body'>");
            content.push('<p><div class="color blue"></div>0-50 คุณภาพดี</p>');
            content.push('<p><div class="color green"></div>51-100 คุณภาพปานกลาง</p>');
            content.push('<p><div class="color yellow"></div>100-200 มีผลกระทบต่อสุขภาพ</p>');
            content.push('<p><div class="color orange"></div>201-300 มีผลกระทบต่อสุขภาพมาก</p>');
            content.push('<p><div class="color red"></div>300+ อันตราย</p></div>');
            content.push("</div>");
            content.push("</div>");
            content.push("<br>");

            content.push("<div class='panel panel-default'>");
            content.push("<div class='panel-heading'>");
            content.push("<h4 class='panel-title'>");
            content.push("<a data-toggle='collapse' data-parent='#accordion' href='#collapse2'>");
            content.push("ดัชนีรังสี</a>");
            content.push("</h4>");
            content.push("</div>");
            content.push("<div id='collapse2' class='panel-collapse collapse'>");
            content.push("<div class='panel-body'>");
            content.push("<p><img src = 'icon/marker_rad_green.png' style = 'height: 35px; width:35px' class = 'img-rounded'> ต่ำกว่า 0.5 คุณภาพดี</p>");
            content.push("<p><img src = 'icon/marker_rad_yellow.png' style = 'height: 35px; width:35px' class = 'img-rounded'> 0.5-0.9 เฝ้าระวัง</p>");
            content.push("<p><img src = 'icon/marker_rad_red.png' style = 'height: 35px; width:35px' class = 'img-rounded'> มากกว่า 1 ฉุกเฉิน</p>");

            content.push("</div>");
            content.push("</div>");


            content.push("</div>");


            legend.innerHTML = content.join('');
            legend.index = 1;
            map.controls[google.maps.ControlPosition.RIGHT_TOP].push(legend);
        }

        function setMarkerOnMap() {

            $.getJSON("http://sysnet.utcc.ac.th/aparcas/api/event_trans.jsp?data=3HourAgo", function(result) {
                for (i = 0; i < result.length; i++) {
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(result[i].lat, result[i].lon),
                        map: map,
                        icon: new google.maps.MarkerImage(getColorMarker(result[i].radio), undefined, undefined, undefined, new google.maps.Size(40, 40)),
                        title: "Hello World!"
                    });

                    markers.push(marker);


                    marker.content = "<div class = 'text-primary'><b>การแจ้งเตือนปริมาณกัมมันตรังสี</b></div>" +
                        "<div class = 'text-muted'>เวลาอัพเดทล่าสุด " + result[i].Date + "</div>" +
                        "<div class = 'text-info'>ไอดีผู้ใช้: " + result[i].user_id + "</div>" +
                        "<div class = 'text-info'>ค่ากัมมันตรังสี: " + result[i].radio + "</div>";
                    var infoWindow = new google.maps.InfoWindow();
                    google.maps.event.addListener(marker, 'click', function() {
                        //  infoWindow.open(map, marker);
                        infoWindow.setContent(this.content);
                        infoWindow.open(this.getMap(), this);
                    });

                }


            });
        }

        function setDataOnMap() {


            var good = [];
            var mModerate = [];
            var Unhealthy1 = [];
            var Unhealthy2 = [];
            var Unhealthy3 = [];



            var aqi = [];
            var tstamp = [];
            var count = 0;

            // $("#showInfo").append("<div class='col-md-12'><h5 class = 'text-info text-center'>ค้นหาเขต: " + mDate + "</h5></div>");

            $.getJSON("http://sysnet.utcc.ac.th/aparcas/api/grid_lut.jsp?data=3HourAgo", function(result) {



                console.log("Some Sub_code");
                for (i = 0; i < result.length; i++) {
                    var grid_id = parseInt(result[i].id);
                    aqi[grid_id] = result[i].aqi;
                    tstamp[grid_id] = result[i].timestamp;

                } // end for

                var districtLayer = new google.maps.KmlLayer({
                    url: 'http://sysnet.utcc.ac.th/aparcas/data/simplified.kml',
                    map: map
                });

                //KmlLayer.push(districtLayer);

                // var geocoder = new google.maps.Geocoder();
                // geocoder.geocode({
                //     'address': sname
                // }, function(results, status) {
                //     if (status == google.maps.GeocoderStatus.OK) {
                //           map.setCenter(results[0].geometry.location);
                //           map.setZoom(13);
                //     }
                // });


                var newAQI = [];
                var grid_id = [];

                for (i = 0; i < aqi.length; i++) {
                    if (aqi[i] != null) {
                        grid_id.push(i);
                        newAQI.push(aqi[i]);

                    }
                }
                for (i = 0; i < grid_id.length; i++) {

                    console.log("grid_id: " + grid_id[i] + " AQI: " + newAQI[i]);
                    //Benna
                    if (newAQI[i] > 0 && newAQI[i] < 51) {
                        good.push(grid_id[i]);
                        count++
                    }
                    if (newAQI[i] > 50 && newAQI[i] < 99) {
                        mModerate.push(grid_id[i]);
                        count++
                    }
                    if (newAQI[i] > 100 && newAQI[i] < 199) {
                        Unhealthy1.push(grid_id[i]);
                        count++
                    }
                    if (newAQI[i] > 200 && newAQI[i] < 299) {
                        Unhealthy2.push(grid_id[i]);
                        count++
                    }
                    if (newAQI[i] > 300) {
                        Unhealthy3.push(grid_id[i]);
                        count++
                    }

                }

                console.log("Good.length: " + good.length);
                for (i = 0; i < good.length; i++) {
                    console.log("Good: " + good[i]);
                }

                console.log("mModerate.length: " + mModerate.length);
                for (i = 0; i < mModerate.length; i++) {
                    console.log("mModerate: " + mModerate[i]);
                }

                console.log("Unhealthy1.length: " + Unhealthy1.length);
                for (i = 0; i < Unhealthy1.length; i++) {
                    console.log("Unhealthy1: " + Unhealthy1[i]);
                }

                console.log("Unhealthy2.length: " + Unhealthy2.length);
                for (i = 0; i < Unhealthy2.length; i++) {
                    console.log("Unhealthy2: " + Unhealthy2[i]);
                }

                console.log("Unhealthy3.length: " + Unhealthy3.length);
                for (i = 0; i < Unhealthy3.length; i++) {
                    console.log("Unhealthy3: " + Unhealthy3[i]);
                }


                if (good.length > 0 && mModerate.length == 0 && Unhealthy1.length == 0 && Unhealthy2.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 1");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    strokeColor: "#ffffff",
                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }

                if (good.length > 0 && mModerate.length > 0 && Unhealthy1.length == 0 && Unhealthy2.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 2");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    strokeColor: "#ffffff",
                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 3");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    strokeColor: "#ffffff",
                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }

                if (good.length > 0 && mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 4");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },

                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    strokeColor: "#ffffff",
                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length > 0) {
                    console.log("CASE: 5");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    strokeColor: "#ffffff",
                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }



                if (mModerate.length > 0 && good.length == 0 && Unhealthy1.length == 0 && Unhealthy2.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 6");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }


                if (Unhealthy1.length > 0 && good.length == 0 && mModerate.length == 0 && Unhealthy2.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 7");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }


                if (Unhealthy2.length > 0 && good.length == 0 && mModerate.length == 0 && Unhealthy1.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 8");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {
                                    //fillColor: getfillColor(aqi),
                                    //strokeColor: getStrokeColor(aqi),
                                    fillColor: "#ffffff",
                                    opacity: .1,


                                }
                            },
                            {
                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    //   fillColor: getfillColor(aqi),
                                    // strokeColor: getStrokeColor(aqi),
                                    fillColor: "#ff944d ",
                                    strokeColor: "#ff944d ",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }

                if (Unhealthy3.length > 0 && good.length == 0 && mModerate.length == 0 && Unhealthy1.length == 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 9");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && Unhealthy1.length > 0 && mModerate.length == 0 && Unhealthy2.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 10");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && Unhealthy2.length > 0 && mModerate.length == 0 && Unhealthy1.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 11");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && Unhealthy3.length > 0 && mModerate.length == 0 && Unhealthy1.length == 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 12");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (mModerate.length > 0 && Unhealthy1.length > 0 && good.length == 0 && Unhealthy3.length == 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 13");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (mModerate.length > 0 && Unhealthy2.length > 0 && good.length == 0 && Unhealthy3.length == 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 14");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (mModerate.length > 0 && Unhealthy3.length > 0 && good.length == 0 && Unhealthy2.length == 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 15");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (Unhealthy1.length > 0 && Unhealthy2.length > 0 && good.length == 0 && mModerate.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 16");
                    console.log("Ben");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },

                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (Unhealthy1.length > 0 && Unhealthy3.length > 0 && good.length == 0 && mModerate.length == 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 17");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }

                if (Unhealthy2.length > 0 && Unhealthy3.length > 0 && good.length == 0 && mModerate.length == 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 18");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },

                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }


                if (good.length > 0 && mModerate.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length == 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 19");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }


                if (good.length > 0 && mModerate.length > 0 && Unhealthy3.length > 0 && Unhealthy2.length == 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 20");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }

                if (good.length > 0 && mModerate.length > 0 && Unhealthy3.length > 0 && Unhealthy2.length == 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 21");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }

                if (good.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && mModerate.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 22");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && Unhealthy1.length > 0 && Unhealthy3.length > 0 && mModerate.length == 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 23");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length > 0 && mModerate.length == 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 24");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }

                if (mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && good.length == 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 25");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy3.length > 0 && good.length == 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 26");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length == 0 && mModerate.length == 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length > 0) {
                    console.log("CASE: 27");
                    console.log("benna");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {
                                    fillColor: "#ffffff",
                                    opacity: .1,
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy3.length > 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 28");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length == 0) {
                    console.log("CASE: 29");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length > 0 && good.length == 0) {
                    console.log("CASE: 30");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && Unhealthy1.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length > 0 && mModerate.length == 0) {
                    console.log("CASE: 31");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && mModerate.length > 0 && Unhealthy2.length > 0 && Unhealthy3.length > 0 && Unhealthy1.length == 0) {
                    console.log("CASE: 32");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy2 + ")",
                                polygonOptions: {
                                    fillColor: "#ff944d",
                                    strokeColor: "#ff944d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                if (good.length > 0 && mModerate.length > 0 && Unhealthy1.length > 0 && Unhealthy3.length > 0 && Unhealthy2.length == 0) {
                    console.log("CASE: 33");
                    var covered = {
                        query: {
                            select: 'geometry',
                            from: '1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G',

                        },
                        map: map,
                        suppressInfoWindows: true,
                        styles: [{
                                polygonOptions: {

                                    fillColor: "#ffffff",
                                    opacity: .1,

                                }
                            },
                            {
                                where: "id IN (" + good + ")",
                                polygonOptions: {

                                    fillColor: "#4d4dff",
                                    strokeColor: "#4d4dff",
                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + mModerate + ")",
                                polygonOptions: {
                                    fillColor: "#4dff88",
                                    strokeColor: "#4dff88",

                                    strokeWeight: 0.1
                                }
                            },
                            {

                                where: "id IN (" + Unhealthy1 + ")",
                                polygonOptions: {
                                    fillColor: "#ffff4d",
                                    strokeColor: "#ffff4d",
                                    //fillColor: "#ff0000",
                                    // strokeColor: "#ff0000",
                                    strokeWeight: 0.1
                                }
                            },
                            {
                                where: "id IN (" + Unhealthy3 + ")",
                                polygonOptions: {

                                    fillColor: "#ff4d4d",
                                    strokeColor: "#ff4d4d",
                                    strokeWeight: 0.1
                                }
                            }
                        ]
                    };
                }
                console.log("count: " + count);
                var mLayer = new google.maps.FusionTablesLayer(covered);
                FusionTable.push(mLayer);
                console.log("mLayer: " + mLayer);



                var infoWindow = new google.maps.InfoWindow({
                    maxWidth: 500
                });

                google.maps.event.addListener(mLayer, 'click', function(ev) {

                    var grid_id = parseInt(ev.row['id'].value);
                    var DName = ev.row['DNAME'].value;
                    var SName = ev.row['SNAME'].value;

                    var content = "<div class = 'text-primary'><b>การแจ้งเตือนสภาพอากาศ</b></div>" +
                        "<div class = 'text-muted'>ค่าเฉลี่ยทั้งวันของวัน " + tstamp[grid_id] + "</div>" +
                        "<div class = 'text-info'>" + DName + "</div>" +
                        "<div class = 'text-info'>" + SName + "</div>" +
                        "<div class = 'text-info'>AQI: " + aqi[grid_id] + "</div>";



                    infoWindow.setContent(content);
                    infoWindow.setPosition(ev.latLng);
                    infoWindow.open(map);
                });


            }); //get json
        } //setDataOnMap



    } //initMap

    function RemoveMarker() {
        for (i = 0; i < FusionTable.length; i++) {
            FusionTable[i].setMap(null);
            console.log("FusionTable: " + i);
        }
        for (var i = 0; i < KmlLayer.length; i++) {
            KmlLayer[i].setMap(null);
        }


    }

    function getColorMarker(radio) {

        var mRadio = parseInt(radio);

        if (radio > 1) {
            return "icon/marker_rad_red.png";
        }
        if (radio > 0.5) {
            return "icon/marker_rad_yellow.png";
        }
        if (radio < 0.5) {
            return "icon/marker_rad_green.png";
        }
        return null;

    }
</script>

<script src="bower_components/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap-notify.js"></script>
<script src="bower_components/bootstrap-waitingfor/build/bootstrap-waitingfor.js"></script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWgbWYxPgHHo-PU4IuhjjZhjh1PXfhYkc&callback=initMap" type="text/javascript"></script>

<!-- <script>
    function setMapOnAll(map) {
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(map);
        }
    }

    function displayTime() {
        var str = "";

        var currentTime = new Date()
        var hours = currentTime.getHours()
        var minutes = currentTime.getMinutes()
        var seconds = currentTime.getSeconds()

        if (minutes < 10) {
            minutes = "0" + minutes
        }
        if (seconds < 10) {
            seconds = "0" + seconds
        }
        str += hours + ":" + minutes + ":" + seconds + " ";
        if (hours > 11) {
            str += "PM"
        } else {
            str += "AM"
        }
        return str;
    }


</script> -->

</html>
