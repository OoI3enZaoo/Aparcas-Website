<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="aparcaslogo.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>Aparcas Project</title>
  <!--   Core JS Files   -->



  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <meta name="viewport" content="width=device-width" />

  <script src="bower_components/jquery/dist/jquery.js"></script>
  <script src="bower_components/jquery-ui/jquery-ui.js"></script>
  <script src="bower_components/jQuery-ui-Slider-Pips/dist/jquery-ui-slider-pips.js"></script>
  <script type="text/javascript" src="bower_components/moment/min/moment.min.js"></script>
  <script type="text/javascript" src="bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>







  <link href="assets/css/style.css" rel="stylesheet" />

  <link rel="stylesheet" href="bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css"
  />





  <link rel="stylesheet" href="bower_components/jquery/src/css/jquery-ui.css">


  <link href="bower_components/jQuery-ui-Slider-Pips/dist/jquery-ui-slider-pips.css" rel="stylesheet" />
  <!-- Bootstrap core CSS     -->
  <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
  <!-- Animation library for notifications   -->
  <link href="bower_components/bootstrap/dist/css/animate.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Mitr" rel="stylesheet">




  <style>
     
      html, body {
        margin-left:auto;
        margin-right:auto;
        font-family: 'Mitr', sans-serif;
        margin: auto; 
        padding: 0 0 0 0;
      }
    </style>

<style type="text/css">


.ui-state-focus, 
.ui-widget-content .ui-state-focus, 
.ui-widget-header .ui-state-focus,
.ui-state-hover, 
.ui-widget-content .ui-state-hover, 
.ui-widget-header .ui-state-hover,
.ui-state-default, 
.ui-widget-content .ui-state-default, 
.ui-widget-header .ui-state-default {
  background: #2b2b2b;
  border-color: transparent;
}
                    
.ui-slider .ui-slider-pip-initial-1 .ui-slider-label {
  color: #E80949; }
                    
.ui-slider .ui-slider-pip-initial-2 .ui-slider-label {
  color: #920AFF; }

  #legend {
    background: #FFF;
    padding: 10px;
    margin: 5px;
    font-size: 12px;
    font-family: Arial, sans-serif;
  }

  .color {
    border: 1px solid;
    height: 12px;
    width: 12px;
    margin-right: 3px;
    float: left;
  }

  .blue {
    background: #4d4dff;
  }

  .green {
    background: #4dff88;
  }

  .yellow {
    background: #ffff4d;
  }

  .orange {
    background: #ff944d;
  }

  .red {
    background: #ff4d4d;
  }

 #full-width {
       padding: 0 0 0 0;
   } 

</style>

</head>

<body>





  <header style="position:relataive">
<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <h4><strong>Air Pollution and Radioactive Contamination Analyzing System </strong> &nbsp;&nbsp;</h4>

    </div>

  </div>
</div>
</header>


<section class="menu-section">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <ul id="menu-top" class="nav navbar-nav navbar-right">
          <li><a href="realtime.html">คุณภาพอากาศแบบเรียลไทม์</a></li>
          <li><a class="menu-top-active" href="radioactive.html">ประวัติปริมาณกัมมันตรังสี</a></li>
          <li><a href="airquality.html">ประวัติคุณภาพอากาศ</a></li>
          <li><a href="directions.html">ค้นหาเส้นทางหลีกเลี่ยงมลพิษ</a></li>
          <li><a href="predict.html">พยากรณ์คุณภาพอากาศ</a></li>
          <li><a href="aqi.html">ดัชนีคุณภาพอากาศ</a></li>
        </ul>
      </div>
    </div>
  </div>
</section>






<div id="full-width" class="container-fluid">
  <div class="row">
    <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7 ">
      <br>
      <div class="container-fluid">

        <h4 class="title text-center text-info">เลื่อนที่แถบเพื่อเลือกเวลา</h4>
        <div id="flat-slider"></div>
      </div>
      <br> <br>

      <div id="map" style="width:100%; height:1000px;" ></div>
</div>
<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 ">

  <br>
  <br>
  <br>
  <br>
  <br>
  <h2 class="text-center text-primary"><b>ระบุเงื่อนไข</h2>
  <h3 class = "text-center text-info">กรุณาเลือกพื้นที่และวันที่เพื่อแสดงข้อมูล</h3>
  
  <br>
  <from>
    <div class="form-group" >
      <h4 class=" col-xs-1 col-sm-1 col-md-1 col-lg-1  col-sm-offset-2 text-info" >จังหวัด:</h4>
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
          <div class="dropdown">
            <button id="pname" class="btn btn-info dropdowSn-toggle" style= "width: 356px; position:relative; font-size:18px " type="button" data-toggle="dropdown">คลิ๊กที่นี่ เพื่อเลือกจังหวัด

<span class="caret"></span></button>
<ul id="dropdownP" class="dropdown-menu" role="menu" style="width: 356px" >
<li><a href='#' data-value='10'>กรุงเทพมหานคร</a></li>

</ul>

</div>
</div>
</div>
<br><br><br>
<div class="form-group">
  <h4 class=" col-xs-1 col-sm-1 col-md-1 col-lg-1  col-sm-offset-2 text-info">เขต:</h4>
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
    <div class="dropdown">
      <button id="dname" class="btn btn-info dropdown-toggle" style="width: 356px; position:relative; font-size:18px " type="button" data-toggle="dropdown">คลิ๊กที่นี่ เพื่อเลือกเขต
<span class="caret"></span></button>
<ul id="dropdownD" class="dropdown-menu" style="width: 356px" >


</ul>

</div>
</div>
</div>
<br>
<br>
<br>
<div class="form-group">
  <h4 class=" col-xs-1 col-sm-1 col-md-1 col-lg-1  col-sm-offset-2 text-info">แขวง:</h4>
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
    <div class="dropdown">
      <button id="sname" class="btn btn-info dropdown-toggle" style="width: 356px; position:relative; font-size:18px " type="button" data-toggle="dropdown">คลิ๊กที่นี่ เพื่อเลือกแขวง
<span class="caret"></span></button>
<ul id="dropdownS" class="dropdown-menu" style="width: 356px" >


</ul>

</div>
</div>
</div>

<br><br>
<br>
<div class="form-group">
  <h4 class=" col-xs-1 col-sm-1 col-md-1 col-lg-1  col-sm-offset-2 text-info" for="email">วัน:</h4>
  <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
    <!-- <input class="form-control" id="txtDate" placeholder="Pick your Date"/> -->
    <input id="txtDate" type='text' class="form-control" style="position:relative; "/>
</div>
</div>
<br>
<br>
<br>
<div class="form-group">
  <div class="row">
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="margin-left:150px">
<button type="button" id="Search" class="btn btn-lg btn-success btn-block">แสดงข้อมูล</button>
</div>
<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
  <button type="button" class="btn btn-lg btn-danger btn-block" style="margin-left:49px">ล้าง</button>

</div>
</div>
</div>
</form>

<br>
<br>

<!--<div class="header">

    <div class="title col-sm-offset-3" id="aqi"></div>
  </div>-->








</div>

</div>
</div>









</body>




<script type="text/javascript" charset="utf-8">


  var countzoom = true;
  var indexTypeGas = 0;
  var Circles = [];

  var markers = [];



$(".dropdown-menu li a").click(function () {// show value when click
        $(this).parents(".dropdown").find('.btn').html($(this).text());
        $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
      });
      
      
  //dname
  function initMap() {


    var myDate;

    var myStartTime = "00:00:00";
    var myEndTime = "23:00:00";
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 7,
      center:

      new google.maps.LatLng(15.038597, 101.438828)
      ,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });



    $("#myGas").click(function () {

      var txt = document.getElementById("txtDate").value;

      if (txt == "") {
        getNotification("pe-7s-close-circle", "danger", "<b>Error</b> Please select your date first");
      }

      $(".dropdown-menu li a").click(function () {// show value when click
        $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
        $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
        var mName = $(this).text();
        var mIndex = $(this).data('value');
        indexTypeGas = parseInt(mIndex);
        console.log("dropdown: " + mName + "  data: " + indexTypeGas);
        RemoveMarker();

        UpdateMap(indexTypeGas, myStartTime, myEndTime, myDate);

      });


    });





    var mTime = ["00:00", "01:00", "02:00", "03:00:", "04:00", "05:00", "06:00", "07:00", "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00"];

    $("#flat-slider")

      .slider({

        range: true,
        min: 1,
        max: 24,
        values: [1, 24],
        step: 1
      })

      .slider("pips", {

        first: "label",
        last: "label",
        rest: "label",
        step: 1,
        labels: mTime,
        prefix: "",
        suffix: ""

      })
      .slider("float", {

        handle: false,
        pips: false,
        labels: mTime,
        prefix: "",
        suffix: ""

      })
      .on("slidechange", function (e, ui) {

        var txt = document.getElementById("txtDate").value;

        if (txt == "") {
          getNotification("pe-7s-close-circle", "danger", "<b>Error</b> Please select your date first");

        } else {

          var startTime = ui.values[0];
          var endTime = ui.values[1];
          $("#outputDate").text("You selected " + mTime[startTime - 1] + " to " + mTime[endTime - 1]);
          RemoveMarker();
          myStartTime = mTime[startTime - 1];
          myEndTime = mTime[endTime - 1];

          UpdateMap(indexTypeGas, myStartTime, myEndTime, myDate);
        }


      });

    $("#Search").click(function () {

      //$("#showInfo").empty();


      var mDate = document.getElementById("txtDate").value;
      var dname = document.getElementById("dname").value;
      var sname = document.getElementById("sname").value;

      if (mDate == "") {
        getNotification("pe-7s-close-circle", "danger", "<b>Error</b> Please select your date first");
      }
      if (dname == "") {
        getNotification("pe-7s-close-circle", "danger", "<b>Error</b>กรุณาเลือกเขต");
      }
      if (sname == "") {
        getNotification("pe-7s-close-circle", "danger", "<b>Error</b>กรุณาเลือกแขวง");
      }
      else {
        myDate = DatePickResponse(mDate);
        RemoveMarker();
        waitingDialog.show('Get data from database...');
        UpdateMap(0, myStartTime, myEndTime, myDate);
        console.log("mDate: " + mDate);
        //$("#showInfo").append("<div class='col-md-12'><h5 class = 'text-info text-center'>ค้นหาเขต: " + myDate + "</h5></div>");


      }


    });

    function UpdateMap(gIndex, startTime, endTime, date) {

      setMapOnAll(null);
      markers = [];


      console.log("UpdateMap(" + gIndex + "," + startTime + "," + endTime + "," + date + ")");
      $.getJSON('http://sysnet.utcc.ac.th/aparcas/api/event_trans.jsp', function (result) {

        /*var mStartTime = Date.parse(startTime);
        var mEndTime = Date.parse(endTime);
        console.log("StartTime: " + mStartTime + " EndTime: " + mEndTime); */


        var myLocation = [];
        var myGas = [];
        var myDateTime = [];
        var check = false;
        var did = document.getElementById("dname").value;
        var sid = document.getElementById("sname").value;
        console.log("Dname: " + dname + " did: " + did);
        for (i = 0; i < result.length; i++) {

          if (sid == result[i].grid_id || sid == 1111) {
            
            var day = moment.unix(result[i].timestamp).format("YYYY-MM-DD HH:mm:ss");
            var re = new RegExp(date, 'g');
            if (day.match(re)) {

              var restime = day;
              res1 = restime.substr(11, 2);
              res2 = restime.substr(14, 2);
              res3 = restime.substr(17, 2);
              restime = res1 + ":" + res2 + ":" + res3;
              //console.log("restime: " + restime + " startTime: " + startTime + " endTime: " + endTime);

              if (restime >= startTime && restime <= endTime) {
                //waitingDialog.message("Load data "+i+"/"+result.AQI.length + " <");    
                var mID = result[i].id;
                var mLat = result[i].lat;
                var mLong = result[i].lon;
                var co = result[i].co;
                var no2 = result[i].no2;
                var o3 = result[i].o3;
                var so2 = result[i].so2;
                var pm25 = result[i].pm25;
                var radio = result[i].radio;
                var AQI = getAQI(co, no2, o3, so2, pm25);  //get AQI from getAQI function      


                myLocation[i] = [mLat, mLong, mID];
                myGas[i] = [radio];
                myDateTime[i] = [day];
                check = true;
                // console.log('name: '+myLocation[i][0] +' lat:' + myLocation[i][1] + ' long: ' +  myLocation[i][2]); //for Debug
                // console.log('AQI: ' + myGas[i][0]+' CO: '+myGas[i][1] + ' NO2: ' + myGas[i][2] + ' O3: ' + myGas[i][3] + ' SO2: ' + myGas[i][4] + ' PM2.5: ' +myGas[i][5] + 'RadioActive: ' +  myGas[i][6]); //for debug

                placeMarker(myLocation[i], myGas[i], myDateTime[i], gIndex);//call method for create circle on the map                   
              }
            } else {
              if (check == false) {
                check = true;
                //getNotification("pe-7s-close-circle", "danger", "<b>Error</b>ไม่พบข้อมูล กรุณาเลือกเป็นวันอื่นๆ");
              }

            }
          }
        }//for     


        waitingDialog.message("Set data to map...");

        function placeMarker(mValue, mGas, mDateTime, type) {

          console.log("placeMarker");
          var covered = {
            strokeColor: getStrokeColor(mGas[type]),//ขอบ
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: getfillColor(mGas[type]),//พื้น
            fillOpacity: 0.35,
            map: map,
            center: new google.maps.LatLng(mValue[0], mValue[1]),
            radius: 500
          };

          // Add the circle for this city to the map.
          var circle = new google.maps.Circle(covered);//Circles           
          Circles.push(circle);


          //getDistrictFromLatlng(mValue[1], mValue[2]);

          var infoWindow = new google.maps.InfoWindow({
            content:
            "<div class = 'text-primary'><b>การแจ้งเตือนปริมาณกัมมันตรังสี</b></div>" +
            "<div class = 'text-muted'>เวลาอัพเดทล่าสุด " + mDateTime[0] + "</div>" +
            "<div class = 'text-info'>ไอดีผู้ใช้: " + mValue[2] + "</div>" +
            "<div class = 'text-info'>ค่ากัมมันตรังสี: " + mGas[0] + "</div>",


            maxWidth: 500
          });

          console.log("mValue: " + mValue[0] + " 2: " + mValue[1]);
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(mValue[1], mValue[2]),
            map: map,
            icon: getIconMarker(mGas[0]),
            title: "Hello World!"
          });

          markers.push(marker);


          map.addListener('zoom_changed', function () {
            console.log("zoom: " + map.getZoom());
            if (map.getZoom() >= 11) {
              setMapOnAll(null);
            }
            if (map.getZoom() < 11) {
              setMapOnAll(map);
            }
          });


          setMapOnAll(map);


          marker.addListener('click', function () {
            infoWindow.open(map, marker);
          });




          if (countzoom == true) {

            var province = document.getElementById("dname").innerHTML;
            console.log("Province: " + province);
            var geocoder = new google.maps.Geocoder();

            geocoder.geocode({ 'address': province }, function (results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                map.setZoom(9);
              }
            });
          }

          google.maps.event.addListener(circle, 'click', function (ev) {

            infoWindow.setPosition(ev.latLng);
            infoWindow.open(map);




          });//end of click on circle  

          countzoom = false;


        }//placeMarker(loc)



        $("button").click(function () {
          console.log("Detail Button");
        });

        setTimeout(function () {
          waitingDialog.hide();
        }, 1000);



      });// json

    }

    /*var legend = document.createElement('div');
    legend.id = 'legend';
    var content = [];
    content.push('<h4>Air Quality Index</h4>');
    content.push('<h5><div class="color blue"></div>0 - 50   Good</h5>');
    content.push('<h5><div class="color green"></div>51 - 100     Moderate</h5>');
    content.push('<h5><div class="color yellow"></div>100 - 200 Unhealthy for Sensitive Groups</h5>');
    content.push('<h5><div class="color orange"></div>201 - 300 Unhealthy</h5>');
    content.push('<h5><div class="color red"></div>300+ Very Unhealty</h5>');
    legend.innerHTML = content.join('');
    legend.index = 1;*/
    //map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legend);        


    // $("#aqi").append(legend.innerHTML)




  }//init map

  var mResult = "";




  $(function () {



    
        /*$.getJSON("http://sysnet.utcc.ac.th/aparcas/api/get_lat_long_from_event_trans.jsp", function (result1) {
    
          for (i = 0; i < result1.length; i++) {
    
            var mlat = result1[i].lat;
            var mlon = result1[i].lon;
            var uid = result1[i].uid;
            console.log("call Loopna");
            postJSON(uid,mlat, mlon);
    
          }
    
    
        });*/

    $.getJSON("http://sysnet.utcc.ac.th/aparcas/api/grid_lut.jsp", function (result) {

      var checkSame = ['55'];
      var count = 1;
      var districtname;

      var query = "<li ><a href='#'data-value='1111'>เขตทั้งหมด</a></li>";
      $("#dropdownD").append(query);
      for (i = 0; i < result.length; i++) {

        districtname = result[i].dname;
        var districtcode = result[i].dcode;

        for (j = 0; j < checkSame.length; j++) {
          if (checkSame[j] == districtcode) {
            count = 0;
            break;
          }
        }
        if (count == 1) {
          var query = "<li ><a href='#'data-value='" + districtcode + "'>" + districtname + "</a></li>";
          $("#dropdownD").append(query);
          checkSame.push(districtcode);
        }
        count = 1;

      }//for


      $(".dropdown-menu li a").click(function () {// show value when click
        $("#dropdownS").empty();
        $(this).parents(".dropdown").find('.btn').html($(this).text());
        $(this).parents(".dropdown").find('.btn').val($(this).data('value'));


        var query = "<li ><a href='#'data-value='2222'>แขวงทั้งหมด</a></li>";
        $("#dropdownS").append(query);

        var dname = document.getElementById("dname").innerHTML;
        var checkSame2 = ['55555'];
        var count2 = 1;

        console.log("dname: " + dname);

        for (i = 0; i < result.length; i++) {
          var sname = result[i].sname;
          var scode = result[i].scode;
          for (j = 0; j < checkSame.length; j++) {

            if (checkSame2[j] == sname) {
              count2 = 0;
              break;
            }
          }
          if (result[i].dname == dname) {
            if (count2 == 1) {
              console.log("DNAME: " + dname + " Sname: " + sname);
              checkSame2.push(sname);
              var query = "<li ><a href='#'data-value='" + scode + "'>" + sname + "</a></li>";
              $("#dropdownS").append(query);

            }
            count2 = 1;
          }
        }
        $(".dropdown-menu li a").click(function () {// show value when click
          $(this).parents(".dropdown").find('.btn').html($(this).text());
          $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
        });

        });

      });


      $('#txtDate').datetimepicker({
        format: 'DD/MM/YYYY'
      });

    });


    /*function postJSON(id,lat,lon){
    
    
            console.log("PostJSON");
            $.getJSON("https://www.googleapis.com/fusiontables/v1/query?key=AIzaSyD2Wl_1_czaWb9aBDSdMNLlOXMNI9ULibw&sql=SELECT SUB_CODE FROM 1x40iw0b31K2vTT6ZiSUxBWUfBbznoppAtERA7S2G WHERE ST_INTERSECTS(geometry, CIRCLE(LATLNG(" + lat + "," + lon + "),100))", function (result2) {
              
              var DistrictID = result2.rows[0][0];
              
              
              console.log("uid: " + id + " did: " + DistrictID + " lat: " + lat + " lon: " + lon);
              $.ajax({
                url: 'http://sysnet.utcc.ac.th/aparcas/api/update_event_trans.jsp',
                type: 'PUT',
                data: "did=" + DistrictID + "&uid=" + id + "",
                success: function (data) {
                  alert('Load was performed.');
                }
              });
            });
    
    }*/
    
    function getNotification(micon, mtype, mdata) {

      $.notify({
        icon: micon,//icon
        message: mdata//data

      }, {
          type: mtype, //type  danger ,warning ,success ,info
          timer: 4000
        });


    }


    function RemoveMarker() {
      for (i = 0; i < Circles.length; i++) {
        Circles[i].setMap(null);
      }
    }
    function setMapOnAll(map) {
      for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(map);
      }
    }
    function getAQI(co, no2, o3, so2, pm25) {
      var mArray = [co, no2, o3, so2, pm25];
      var maxValueInArray = Math.max.apply(null, mArray);
      return parseFloat(maxValueInArray);
    }



    /* function getDistrictFromLatlng(lat, lng) {
   
       //console.log('getDistrictFromLatlng lat: ' + lat + " long: "+lng)
       $.getJSON("https://maps.googleapis.com/maps/api/geocode/json?latlng=" + lat + "," + lng + "&key=AIzaSyAWgbWYxPgHHo-PU4IuhjjZhjh1PXfhYkc", function (result) {
        
   
         for (j = 0; j < result.results[0].address_components.length; j++) {
           if (result.results[0].address_components[j].long_name.match(/^เขต.*$/) || result.results[0].address_components[j].long_name.match(/^อำเภอ.*$/)) {
             var myDistrict = result.results[0].address_components[j].long_name;
             var mCutSpace = myDistrict.replace(" ", "");
             // var mCutTitle = myDistrict.replace("เขต ","");    
             //var a = mCutSpace+mCutTitle;
             mResult = mCutSpace.valueOf();
             var addText = "กิ่ง";
             if (mResult == "อำเภอสามชัย" || mResult == "อำเภอนาคู" || mResult == "อำเภอพนมดงรัก" || mResult == "อำเภอโนนนารายณ์" || mResult == "อำเภอเนินขาม" || mResult == "อำเภอหนองหิน" || mResult == "อำเภอบึงสามัคคี" || mResult == "อำเภอบัวลาย" ||
               mResult == "อำเภอซับใหญ่" || mResult == "อำเภอศิลาลาด" || mResult == "อำเภอบ้านแฮด" || mResult == "อำเภอพระทองคำ" ||
               mResult == "อำเภอสากเหล็ก" || mResult == "อำเภอบึงนาราง" || mResult == "อำเภอกุดรัง" || mResult == "อำเภอหนองมะโมง" || mResult == "อำเภอสากเหล็ก" || mResult == "อำเภอดงเจริญ" || mResult == "อำเภอเทพารักษ์" || mResult == "อำเภอแคนดง" || mResult == "อำเภอฆ้องชัย" || mResult == "อำเภอเมืองยาง" || mResult == "อำเภอลำทะเมนชัย" || mResult == "อำเภอหนองฮี" || mResult == "อำเภอซำสูง" || mResult == "อำเภอโนนศิลา" || mResult == "อำเภอหนองนาคำ" || mResult == "อำเภอดอนจาน") {
               mResult = addText + mResult;
             }
             if (mResult == "อำเภอปทุมรัตน์") {
               mResult = "อำเภอปทุมรัตต์";
             }
             if (mResult == "อำเภอหนองบุนนาก") {
               mResult = "อำเภอหนองบุญนาก";
             }
             if (mResult == "อำเภอกุฉินารายณ์") {
               mResult = "อำเภอกุฉินารายน์";
             }
             if (mResult == "อำเภอโคกโพธิ์ไชย") {
               mResult = "กิ่งอำเภอโคกโพธิ์ชัย";
             }
             if (mResult == "อำเภอเมืองนครราชสีมา") {
               mResult = "เมืองนครราชสีมา";
             }
             if (mResult == "อำเภอเวียงเก่า") {
               mResult = "อำเภอภูเวียง";
             }
             if (mResult == "อำเภอโพทะเล") {
               mResult = "โพทะเล";
             }
   
             //console.log('getDistrictFromLatlng lat: ' + lat + " long: "+lng)
             //console.log("test: "  +mResult);
             getDistrictIDFromDistrictName(mResult);
   
           }
         }
   
   
   
       });
   
     }
   */

    function DatePickResponse(dateText) {
      var Day = dateText.substr(0, 2);
      var Month = dateText.substr(3, 2);
      var Year = dateText.substr(6, 7);
      var result = Year + "-" + Month + "-" + Day;
      return result;
    }

    //for test on url
    //https://www.googleapis.com/fusiontables/v2/query?sql=SELECT CCA_2 FROM17Vj_x8KaduQcuxi_C0M6teVPKoId_7qQyyJC_zRs WHERE NL_NAME_2 = 'อำเภอท่าตูม'&key=AIzaSyAWgbWYxPgHHo-PU4IuhjjZhjh1PXfhYkc
    function getDistrictIDFromDistrictName(name) {
      /* $.getJSON("https://www.googleapis.com/fusiontables/v2/query?sql="+
             "SELECT CCA_2 "+
             "FROM 17Vj_x8KaduQcuxi_C0M6teVPKoId_7qQyyJC_zRs "+
             "WHERE NL_NAME_2 = '"+name+"'"+
             "&key=AIzaSyAWgbWYxPgHHo-PU4IuhjjZhjh1PXfhYkc",function(result){
     
               var str = result.rows+"";
               var res = str.substr(0,4);
     
            $.post("http://sysnet.utcc.ac.th:8161/aparcas/api/SetDistrict2.jsp",
               {
                   id : res,
                   name: name,
                   province : 
                   co: co,
                   no2: no2,
                   o3: o3,
                   so2:so2,
                   pm25:pm25,
                   radio: radio, 
                   timestamp: time
     
                   
               },
     
               function(data, status){
                   alert("Data: " + data + "\nStatus: " + status);
               }); */

      /*$.ajax({
          type: "POST",
           contentType: "charset=utf-8",
          url: 'http://sysnet.utcc.ac.th:8161/aparcas/api/District2.jsp',
          data: { 
              id : res,
              name: name,
              co: co,
              no2: no2,
              o3: o3,
              so2:so2,
              pm25:pm25,
              radio: radio, 
              timestamp: time
          }
      });*/

      // });


    }


    /* function showDetail(lat, lng) {
       //getDistrictFromLatlng(lat, lng);
       console.log("Lat: " + lat, " long: " + lng);
       console.log("District: " + mResult);
   
     }*/

    function getIconMarker(number) {

      if (number > 300) {
        return 'http://maps.google.com/mapfiles/ms/icons/red-dot.png';//red
      }
      if (number > 201) {
        return 'http://maps.google.com/mapfiles/ms/icons/orange-dot.png';//orange
      }
      if (number > 100) {
        return 'http://maps.google.com/mapfiles/ms/icons/yellow-dot.png';//yellow
      }
      if (number > 51) {
        return 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'//green
      }
      else {
        return 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png';//blue

      }
      return null;
    }

    function getfillColor(number) {


      if (number > 300) {
        return "#ff4d4d";//red
      }
      if (number > 201) {
        return "#ff944d";//orange
      }
      if (number > 100) {
        return "#ffff4d";//yellow
      }
      if (number > 51) {
        return "#4dff88"//green
      }
      else {
        return "#4d4dff";//blue

      }
      return null;
    }

    function getStrokeColor(number) {



      if (number > 300) {
        return "#ff0000";//red
      }
      if (number > 201) {
        return "#ff6600";//orange
      }
      if (number > 100) {
        return "#ffff00";//yellow
      }
      if (number > 51) {
        return "#00cc00"//green
      }
      else {
        return "#0066ff";//blue       
      }
      return null;
    }






</script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js" type="text/javascript"></script>





<script src="bower_components/bootstrap/dist/js/bootstrap-notify.js"></script>

<script src="bower_components/bootstrap-waitingfor/build/bootstrap-waitingfor.js"></script>


<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWgbWYxPgHHo-PU4IuhjjZhjh1PXfhYkc&callback=initMap"
  type="text/javascript"></script>



</html>